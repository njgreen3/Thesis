\chapter{Energy Conversion}
\label{ch:conv}

Energy and power take many different forms, from the initial sources to the end results used. Necessarily, methods have been developed to convert the different forms of energy or power from one to another. The first method addressed in this chapter is the conversion process of thermal to mechanical to electrical energy found in heat engines and generators. This thesis is focused on geothermal heat, however heat engines can be used with a number of different sources including the burning of a fuel such as biomass or coal, or even as waste heat from an independent process. Next conversion between different forms of electrical power will be addressed.

\input{NG_geotherm} %used to contain geothermal chapter, now contains thermal section


\section{Electrical Generators}
%This section should focus the difference between the two with respect to geothermal sources. I can have a fundemental description of the generators either in this chapter or the intro chapter.
Electrical generators are spinning machines which convert the mechanical power of rotating a shaft to electrical power. Fundamentally, they operate on the principles of Maxwell's and Faraday's laws which broadly state that a moving magnetic field produces an electric field and vice versa. The primary difference among generator types is how that magnetic is produced. 
%As previously described, asynchronous generators, also called induction generators, are incapable maintaining a grid. Synchronous generators supply or absorb reactive power depending on the needs of the grid.

\subsection{Synchronous Generators}
The magnetic fields of Synchronous generators are formed by external sources. The name derives from the fact that electric frequency directly synchronizes with the physical rotation of the machine.\footnote{Certain wiring configurations add additional electromagnetic poles to machine which causes the mechanical speed to be slower than the electrical speed by a factor of the integer number of poles.} They are capable of supplying reactive power as well as their loads because the internal magnetic field is not self induced. 

In traditional synchronous machines an electro-magnet is used to generate the field by running a DC current through the rotor windings. The spinning DC electric field produces a magnetic field, which in turn makes an electric field in the stator. By varying the DC current applied to the rotor, the user can control voltage generated by the machine. The current sets the magnetic flux, which in turn controls the voltage. \cite{Chapman2005} As discussed in \autoref{sec:droop}, droop control takes advantage of the relationship between voltage and reactive power to ensure they are appropriately balanced.

Permanent magnets are also used to form the magnetic field of the rotor. A benefit of using permanent magnets over electro-magnets is the lack of slip rings or brushes used to apply the DC current. These components can introduce a source of friction and wear down over time. However, the since permanent magnetic fields are fixed at the time of construction, the user cannot control the voltage of the machine.

\subsection{Asynchronous Generators}
Asynchronous machines generate their internal magnetic fields by self-induction rather than from an external source. Since they do not rely on an additional source or expensive material to operate, induction machines are generally have simpler designs and are more affordable than synchronous machines. However, that also means they need to consume reactive power from the grid in order to maintain their magnetic field. This field relies on a difference in frequency between the rotor and stator fields. The relative difference is represented by the machine's slip. When the slip is positive, the field frequency in the stator is greater than in the rotor\footnote{After accounting for the number of poles}, and the machine operates as a motor. A negative slip means the rotor is spinning faster than the frequency of the stator and the machine is acting as a generator. 


Some work has been done on self-excited induction generators\cite{Ouazenne1983, Ammasaigounden1986}. Instead of consuming it from the grid, these machines use a bank of capacitors connected at their leads supply the necessary reactive power in order to maintain their magnetic fields. However, a significant drawback to these devices is the lack of control over frequency and voltage.\cite{Bansal2005} For this they have not seen commercial implementation, and if they do it will likely be limited to isolated systems.

\section{Electronic Conversion}
As described previously, electronic conversion takes electric power from either an AC or DC form and converts it to a different form or level. This is generally done by switching the path of the input current to form the desired output. Control over the switching is critical for these conversion devices. Pulse Width Modulation (PWM) and Pulse Frequency Modulation (PFM) are two alternate methods of controlling switching states of the semiconductor devices. Both methods vary the duty cycle\footnote{The fractional time the device is on relative to one period.} of the control signal of the device in order to change the on/off state. For PWM the switching frequency is held constant while the duration of the pulse is varied to control the output. In PFM, the duration of each pulse is fixed while time between pulses, and therefore the frequency, does vary.
%\subsection{Linear Power Supplies}
%Linear

%\subsection{Switched Mode Power Supplies}

\subsection{DC-DC}
%description, diagram, and waveform of simple buck and boost converters
DC-DC power conversion devices can generally be divided up into two simple designs: buck to step voltage down and boost to step voltage up. The concepts used in these two designs can be modified or combined to create a number of  DC-DC converter topologies with slightly different characteristics. These include but are not limited to \'Cuk, SEPIC, Flyback, Forward, Half-bridge, and Full-bridge converters. \cite{Mohan2003}

In a simple Buck converter, seen in \autoref{fig:simple_buck}, timed switching sets the average output voltage to a value smaller than the input. The inductor ensures a continuous current at the output and the capacitor provides a steady voltage with only modest ripple. 
%Example waveforms of input and output current and voltage can be seen for a simple buck converter in fig X.

\input{figures/simple_buck}

In a simple Boost converter, seen in \autoref{fig:simple_boost}, timed switching also sets the average output voltage to the desire level. However, the placement of the components leads to an increasing current through the inductor while the switch is closed. When the switch is open, the relatively high current flow through the diode and results in a larger average output voltage than seen at the input. As in the buck converter, the capacitor provides a steady voltage. 
%Example waveforms of input and output current and voltage can be seen for a simple buck converter in fig X.

\input{figures/simple_boost}

\subsection{Rectifier and Inverter}
%description, diagram, and waveform of simple rectifier
Simple rectifiers use a combination of diodes to convert an AC voltage to DC. \autoref{fig:simple_rectifier} shows a simple example of a single phase rectifier. The diodes allow a path such that the DC current always flows in the same direction regardless of AC polarity. More advance designs will use active switching devices and a control scheme to provide the same function. Though more complicated to implement, the user has more direct control over the output as well as how the load appears to the input. 
%Example waveforms of input and output current and voltage can be seen for a simple buck converter in fig X.

\input{figures/simple_rectifier}


%\subsection{Inverter}
%description, diagram, and waveform of simple inverter
Inverters function as rectifiers in reverse. A DC source is switched on and off such that it alternates periodically. In fact many inverters are designed to be reversible. The device can control the flow of active and reactive power flow in an inverter mode or a rectifier mode.

